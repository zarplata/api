# Рабочие аккаунты менеджера

Менеджер может выполнять действия от лица нескольких работодателей. Для взаимодействия с API в контексте определенного
работодателя нужно использовать соответсвующий рабочий аккаунт (в терминологии сайта - импланты).
У пользователя может быть несколько рабочих аккаунтов, один из них является основным. Какой аккаунт является основным можно узнать,
получив [список рабочих аккаунтов менеджера](#get-manager-accounts). Основной аккаунт используется, если в качестве авторизации посылать только токен
(подробнее можно прочитать [здесь](#using-account)).

* [Получение списка рабочих аккаунтов пользователя](#get-manager-accounts)
* [Выбор аккаунта при запросах](#using-account)

<a name="get-manager-accounts"></a>
## Получение списка рабочих аккаунтов пользователя

### Запрос

```
GET /manager_accounts/mine
```

### Ответ

Успешный ответ приходит с кодом `200 OK` и содержит тело:

```json
{
    "items": [
        {
            "id": "1",
            "employer": {
                "id": "12345678",
                "name": "Alpha Corp."
            }
        },
        {
            "id": "2",
            "employer": {
                "id": "87654321",
                "name": "Beta Inc."
            }
        }
    ],
    "current_account_id": "2",
    "primary_account_id": "1",
    "is_primary_account_blocked": false
}
```

где:

Имя | Тип | Описание
--- | --- | ------
items | список | список [рабочих аккаунтов](#account-info) пользователя
current_account_id | строка | идентификатор текущего рабочего аккаунта (совпадает со значением переданного в заголовке)
primary_account_id | строка | идентификатор главного рабочего аккаунта
is_primary_account_blocked | логический | заблокирован ли главный аккаунт

<a name="account-info"></a>
#### Объект `account`

Имя | Тип | Описание
--- | --- | ------
id | строка | идентификатор рабочего аккаунта
employer | объект | [информация о компании](#employer-info), к которой прикреплен рабочий аккаунт

<a name="employer-info"></a>
#### Объект `employer`

Имя | Тип | Описание
--- | --- | ------
id | строка | идентификатор компании
name | строка | название компании

### Ошибки

* `403 Forbidden` — ошибка авторизации (пользователь не является менеджером)


<a name="using-account"></a>
## Выбор аккаунта при запросах

Для работы под определенным аккаунтом необходимо передать значение `account_id`, полученное из [списка](#get-manager-accounts), в заголовке:

```
X-Manager-Account-Id: {account_id}
```

Использовать данный заголовок можно во всех методах, доступных для работодателей.

В заголовке можно передавать `account_id` основного аккаунта, который также подразумевается по умолчанию, при отсутсвии заголовка.


<a name="errors"></a>
## Ошибки

* `403 Forbidden` — рабочий аккаунт с переданным `account_id` не найден. Дополнительно к коду вернется [причина ошибки](errors.md#manager-accounts)
* `403 Forbidden` — ошибка авторизации (при запросах с авторизацией не работодателя)
