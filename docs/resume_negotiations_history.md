# История откликов/приглашений по резюме

Получение истории откликов/приглашений доступно только работодателю. Список будет содержать последние действия
с указанным резюме, ограниченные 30-ю вакансиями данного работодателя, и 10-ю изменениями состояний откликов/приглашений
по каждой из этих вакансий.


### Запрос

Нет необходимости собирать url запроса вручную, его нужно получать
из [поля `negotiations_history` в резюме](resumes.md#negotiations-history-field).

`GET /resumes/{resume_id}/negotiations_history`,

где `resume_id` – идентификатор резюме.

<a name="response"></a>
### Ответ

Успешный ответ приходит с кодом `200 OK` и содержит:

```json
{
    "vacancies": [
        {
            "id": "321",
            "name": "Тестовая вакансия",
            "url": "https://api.zarplata.ru/vacancies/321",
            "archived": false,
            "can_edit": true,
            "items": [
                {
                    "employer_state": {
                        "id": "offer",
                        "name": "Предложение о работе"
                    },
                    "created_at": "2017-01-30T15:06:47+0300",
                    "with_message": true
                }
            ],
            "negotiations_url": "https://api.zarplata.ru/negotiations/123",
            "messages_url": "https://api.zarplata.ru/negotiations/123/messages"
        }
    ]
}
```

Для каждого элемента `vacancies[]` указано:

Имя | Тип | Описание
-----|-----|---------
id | числовой | уникальный идентификатор вакансии
name | строка | название вакансии
url | строка | url, на который необходимо делать GET запрос для получения [данных о вакансии](vacancies.md#item)
archived | логический | признак того, что вакансия находится в архиве
can_edit | логический | признак того, что менеджер может редактировать данные вакансии, а так же работать с информацией об откликах/приглашениях по этой вакансии
items | список | список последних изменений состояний откликов/приглашений по указанному резюме и данной вакансии
items[].employer_state.id | строка | уникальный идентификатор [состояния отлика/приглашения](dictionaries.md#Справочники-для-откликовприглашений-переписка)
items[].employer_state.name | строка | название состояния отлика/приглашения
items[].created_at | строка (дата) | дата изменения состояния отлика/приглашения
items[].with_message | логический | признак того, что при изменении состояния отклика/приглашения было отправлено сообщение соискателю
negotiations_url | строка | url, на который необходимо делать GET запрос для получения [данных об отклике/приглашении](employer_negotiations.md#get-negotiation). Если `can_edit` равно `false`, значение поля должно игнорироваться.
messages_url | строка | url, на который необходимо делать GET запрос для получения [списка сообщений в отклике/приглашении](employer_negotiations.md#get-messages). Если `can_edit` равно `false`, значение поля должно игнорироваться.

### Ошибки

* `403 Forbidden` — пользователь не является работодателем.
* `404 Not Found` — резюме не существует или недоступно.
